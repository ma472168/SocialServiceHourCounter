<!DOCTYPE html>
<html lang="es">
<!--new version 2-->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Horas Servicio Social v2</title>
    <link rel="stylesheet" href="css/index.css">
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

    <script>
        // Tu configuraci√≥n de Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyCD-A8ZoKMyu4_ZZhD5Vt5BZNG4xxwWT28", // <-- ¬°Pega tu API Key real aqu√≠!
            authDomain: "socialservicehourcounterapp.firebaseapp.com",
            projectId: "socialservicehourcounterapp",
            storageBucket: "socialservicehourcounterapp.firebasestorage.app",
            messagingSenderId: "588272545302",
            appId: "1:588272545302:web:03523e68c524985a900f37",
            measurementId: "G-MVSYDEM168"
        };

        // Inicializa Firebase
        firebase.initializeApp(firebaseConfig);

        // Obt√©n una referencia a la Realtime Database (hazla global para SocialServiceHourCounter.js)
        const database = firebase.database();
    </script>

</head>

<body>
    <div class="container">
        <header>
            <h1>üìÖ Registro de Horas de Servicio Social</h1>
            <div class="info-box">
                <p><strong>Periodo:</strong> 02/06/2025 al 30/11/2025 | <strong>Total d√≠as:</strong> 182 |
                    <strong>D√≠as
                        laborables:</strong> 130 | <strong>Horas requeridas:</strong> 500
                </p>
            </div>
        </header>

        <div class="card active" id="form-card">
            <div class="card-header" onclick="toggleCard(this.parentElement)">
                üìù Formulario de Registro
            </div>
            <div class="card-content">
                <form id="registro-form">
                    <label for="fecha">Fecha:</label>
                    <input type="date" id="fecha" required min="2025-06-02" max="2025-11-30">

                    <label for="horas">Horas trabajadas:</label>
                    <input type="number" id="horas" min="0.01" step="0.01" required placeholder="Ej: 4.5">

                    <label for="nota">Nota (opcional):</label>
                    <input type="text" id="nota" placeholder="Descripci√≥n de la actividad">

                    <button type="submit" class="btn-success" id="agregarHorasBtn">‚ûï Registrar Horas</button>
                </form>
            </div>
        </div>

        <div class="card active" id="stats-card">
            <div class="card-header" onclick="toggleCard(this.parentElement)">
                üìä Estad√≠sticas
            </div>
            <div class="card-content">
                <div class="stats-container">
                    <div class="stat-card stat-horas">
                        <span class="stat-title">Horas registradas</span>
                        <span class="stat-value" id="horas-registradas">0.0</span>
                    </div>
                    <div class="stat-card stat-restantes">
                        <span class="stat-title">Horas restantes</span>
                        <span class="stat-value" id="horas-restantes">500.0</span>
                    </div>
                    <div class="stat-card stat-dias">
                        <span class="stat-title">D√≠as registrados</span>
                        <span class="stat-value" id="dias-registrados">0</span>
                    </div>
                    <div class="stat-card stat-promedio">
                        <span class="stat-title">Prom. Horas restantes por d√≠a</span>
                        <span class="stat-value" id="promedio-horas">0.00</span>
                    </div>
                    <div class="stat-card stat-validos">
                        <span class="stat-title">D√≠as v√°lidos restantes</span>
                        <span class="stat-value" id="dias-validos-restantes">130</span>
                    </div>
                </div>

                <div class="progress-container">
                    <div class="progress-label">
                        <span>Progreso del servicio social</span>
                        <span id="porcentaje-progreso">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div id="barra-progreso" class="progress-inner">0%</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card" id="records-card">
            <div class="card-header" onclick="toggleCard(this.parentElement)">
                üìã Registros
            </div>
            <div class="card-content">
                <div class="filters">
                    <input type="date" id="filtroFechaInicio" placeholder="Fecha inicio">
                    <input type="date" id="filtroFechaFin" placeholder="Fecha fin">
                    <button id="aplicarFiltroBtn" class="btn-success">Aplicar Filtro</button>
                    <button id="limpiarFiltroBtn" class="btn btn-danger">Limpiar Filtro</button>
                </div>

                <ul id="lista-registros" class="registro-list">
                    <li class="empty-message">No hay registros a√∫n. Agrega tu primera entrada usando el formulario.</li>
                </ul>
            </div>
        </div>

        <div class="card" id="import-export-card">
            <div class="card-header" onclick="toggleCard(this.parentElement)">
                üíæ Importar / Exportar
            </div>
            <div class="card-content">
                <button onclick="exportarJSON()" class="btn-success">‚¨áÔ∏è Exportar JSON</button>
                <p style="margin: 20px 0 10px; font-size: 1rem;">Importar registros:</p>
                <input type="file" id="importar-json" accept=".json">
            </div>
        </div>

        <div class="card" id="options-card">
            <div class="card-header" onclick="toggleCard(this.parentElement)">
                ‚öôÔ∏è Opciones
            </div>
            <div class="card-content">
                <button onclick="borrarRegistros()" class="btn-danger">üóëÔ∏è Borrar todos los registros</button>
                <hr style="margin: 20px 0; border: none; border-top: 1px solid #eee;">

                <div class="excluidos-container">
                    <h3 style="margin-bottom: 15px;">üóìÔ∏è D√≠as a excluir del c√°lculo</h3>
                    <p>Agregar d√≠as que no trabajar√°s (vacaciones, d√≠as festivos, etc.):</p>

                    <div class="fecha-input-group">
                        <input type="date" id="fecha-excluida" min="2025-06-02" max="2025-11-30">
                        <button type="button" onclick="agregarFechaExcluida()">‚ûï A√±adir</button>
                    </div>

                    <ul id="lista-excluidos" class="excluidos-list">
                        <li class="empty-message">No hay d√≠as excluidos</li>
                    </ul>

                    <div style="margin-top: 20px;">
                        <label><input type="checkbox" id="excluir-sabados"> Excluir s√°bados</label><br>
                        <label><input type="checkbox" id="excluir-domingos"> Excluir domingos</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="js/index.js"></script>
</body>

</html>