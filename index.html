<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Registro de Horas - Servicio Social</title>
</head>
<body>
  <h2>Registro de Horas - Servicio Social</h2>
  <label>Fecha:</label>
  <input type="date" id="fecha" /><br /><br />
  <label>Horas realizadas:</label>
  <input type="number" id="horas" placeholder="Horas" min="0" step="0.5" /><br /><br />
  <button onclick="registrar()">Registrar</button>

<script>
  const endpoint = "https://v1.nocodeapi.com/xenredda/google_sheets/MjJDqobKrGjOSDWV?tabId=Hoja%201";

  async function registrar() {
    const fecha = document.getElementById("fecha").value;
    const horas = document.getElementById("horas").value;

    if (!fecha || !horas) {
      alert("Por favor completa ambos campos.");
      return;
    }

    const body = {
      values: [[fecha, parseFloat(horas)]]
    };

    try {
      const response = await fetch(endpoint, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(body)
      });

      if (response.ok) {
        alert("Horas registradas correctamente");
        document.getElementById("fecha").value = "";
        document.getElementById("horas").value = "";
      } else {
        const errorText = await response.text();
        console.error("Respuesta del servidor:", errorText);
        alert("Error al registrar horas:\n" + errorText);
      }
    } catch (error) {
      alert("Error de conexi√≥n: " + error.message);
    }
  }
</script>

</body>
</html>
